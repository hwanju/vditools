#!/usr/bin/stap -v
probe kernel.trace("kvm_vlp_avg") {
        printf("%s %d %d %d\n", "VP", $vm_id, $vlp_avg, $vlp_period)
}

probe kernel.trace("kvm_load_check") {
        printf("%s %d %d %d %d %d %d\n", "LC", $op, $vm_id, $nr_load_entries, $load_period_msec, $start_load_time, $end_load_time)
}

probe kernel.trace("kvm_vcpu_stat") {
        printf("%s %d %d %d %d\n", "VS", $vm_id, $vcpu_id, $run_delay, $flags)
}

probe kernel.trace("kvm_vcpu_load") {
        printf("%s %d %d %d %d %d\n", "VL", $vm_id, $vcpu_id, $cur_load_idx, $load_idx, $cpu_load)
}

probe kernel.trace("kvm_gthread_load") {
        printf("%s %d %d %05x %d %d %d\n", "TL", $vm_id, $vcpu_id, $guest_task_id, $cur_load_idx, $load_idx, $cpu_load)
}

probe kernel.trace("kvm_load_info") {
        printf("%s %d %d %d %d %d %d %d\n", 
                "LI", $kvm->vm_id, $kvm->monitor_seqnum, $kvm->last_interactive_seqnum, $kvm->interactive_phase, $kvm->pre_monitor_load, $cur_vm_load, $reactive_gtask_load )
}
probe kernel.trace("kvm_gtask_stat") {
        printf("%s %d %d %05x %d %d\n", "TS", $vm_id, $interactive_phase, $guest_task_id, $cpu_load, $flags)
}
probe kernel.trace("kvm_ui") {
        printf("%s %d %d %d\n", "UI", $kvm->vm_id, $event_type, $event_info)
}
